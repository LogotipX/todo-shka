<template>
  <div :style="{ width: todoWidth[selectedTodoWidth] }" class="page-container">
    <div class="card">
      <div class="card-body">
        <div
          class="attr-panel"
          style="display: flex; justify-content: space-between"
        >
          <h4 class="card-title">Awesome Todo list</h4>
          <div class="options">
            <select v-model="selectedTodoWidth" name="width" id="select-width">
              <option>Small</option>
              <option>Medium</option>
              <option>Large</option>
            </select>
          </div>
          <!-- <div class="options-icons">
            <span class="arrows-move-svg">
              <svg
                class="svg-icons"
                width="24px"
                height="24px"
                enable-background="new 0 0 32 32"
                id="_x3C_Layer_x3E_"
                version="1.1"
                viewBox="0 0 32 32"
                xml:space="preserve"
                xmlns="http://www.w3.org/2000/svg"
                xmlns:xlink="http://www.w3.org/1999/xlink"
              > -->
          <!-- <rect width="100%" height="100%" fill="black" /> -->
          <!-- <g id="arrows_x2C__Drag_x2C__move_x2C__crossroads">
                  <g
                    id="Arrows_x2C__choose_x2C__opportunity_x2C__person_x2C__ways_1_"
                  >
                    <path
                      d="M17.5,16c-0.276,0-0.5-0.224-0.5-0.5v-8C17,7.224,17.224,7,17.5,7h1.747L16,2.368L12.753,7H14.5    C14.776,7,15,7.224,15,7.5v5c0,0.276-0.224,0.5-0.5,0.5S14,12.776,14,12.5V8h-2.208c-0.187,0-0.357-0.104-0.443-0.269    c-0.086-0.166-0.073-0.365,0.034-0.518L15.59,1.21c0.188-0.267,0.632-0.267,0.819,0l4.208,6.003    c0.107,0.153,0.12,0.353,0.034,0.518C20.565,7.896,20.394,8,20.208,8H18v7.5C18,15.776,17.776,16,17.5,16z"
                      fill="#263238"
                    />
                    <path
                      d="M24.5,20.705c-0.079,0-0.158-0.019-0.231-0.057C24.104,20.562,24,20.391,24,20.205V18h-7.5    c-0.276,0-0.5-0.224-0.5-0.5s0.224-0.5,0.5-0.5h8c0.276,0,0.5,0.224,0.5,0.5v1.744l4.634-3.247L25,12.75v1.75    c0,0.276-0.224,0.5-0.5,0.5h-5c-0.276,0-0.5-0.224-0.5-0.5s0.224-0.5,0.5-0.5H24v-2.21c0-0.187,0.104-0.357,0.269-0.443    c0.165-0.087,0.365-0.074,0.518,0.034l6.006,4.208c0.133,0.094,0.213,0.247,0.213,0.41s-0.08,0.316-0.213,0.41l-6.006,4.208    C24.701,20.674,24.601,20.705,24.5,20.705z"
                      fill="#263238"
                    />
                    <path
                      d="M16,31.003c-0.163,0-0.316-0.08-0.41-0.213l-4.208-6.003c-0.107-0.153-0.12-0.353-0.034-0.518    C11.435,24.104,11.606,24,11.792,24H14v-7.5c0-0.276,0.224-0.5,0.5-0.5s0.5,0.224,0.5,0.5v8c0,0.276-0.224,0.5-0.5,0.5h-1.747    L16,29.632L19.247,25H17.5c-0.276,0-0.5-0.224-0.5-0.5v-5c0-0.276,0.224-0.5,0.5-0.5s0.5,0.224,0.5,0.5V24h2.208    c0.187,0,0.357,0.104,0.443,0.269c0.086,0.166,0.073,0.365-0.034,0.518L16.41,30.79C16.316,30.923,16.163,31.003,16,31.003z"
                      fill="#263238"
                    />
                    <path
                      d="M7.5,20.705c-0.101,0-0.201-0.03-0.287-0.09l-6.006-4.208c-0.133-0.094-0.213-0.247-0.213-0.41    s0.08-0.316,0.213-0.41l6.006-4.208c0.154-0.107,0.353-0.121,0.518-0.034C7.896,11.432,8,11.603,8,11.79V14h7.5    c0.276,0,0.5,0.224,0.5,0.5S15.776,15,15.5,15h-8C7.224,15,7,14.776,7,14.5v-1.75l-4.634,3.247L7,19.244V17.5    C7,17.224,7.224,17,7.5,17h5c0.276,0,0.5,0.224,0.5,0.5S12.776,18,12.5,18H8v2.205c0,0.187-0.104,0.357-0.269,0.443    C7.658,20.686,7.579,20.705,7.5,20.705z"
                      fill="#263238"
                    />
                  </g>
                </g>
              </svg>
            </span>
            <span> -->
          <!-- <img
                class="svg-icons"
                src="@/assets/SVG/arrows-move.svg"
                alt=""
              /> -->
          <!-- </span>
            <span class="settings-svg">
              <svg
                class="svg-icons"
                fill="#000000"
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 50 50"
                width="24px"
                height="24px"
              >
                <path
                  d="M 22.205078 2 A 1.0001 1.0001 0 0 0 21.21875 2.8378906 L 20.246094 8.7929688 C 19.076509 9.1331971 17.961243 9.5922728 16.910156 10.164062 L 11.996094 6.6542969 A 1.0001 1.0001 0 0 0 10.708984 6.7597656 L 6.8183594 10.646484 A 1.0001 1.0001 0 0 0 6.7070312 11.927734 L 10.164062 16.873047 C 9.583454 17.930271 9.1142098 19.051824 8.765625 20.232422 L 2.8359375 21.21875 A 1.0001 1.0001 0 0 0 2.0019531 22.205078 L 2.0019531 27.705078 A 1.0001 1.0001 0 0 0 2.8261719 28.691406 L 8.7597656 29.742188 C 9.1064607 30.920739 9.5727226 32.043065 10.154297 33.101562 L 6.6542969 37.998047 A 1.0001 1.0001 0 0 0 6.7597656 39.285156 L 10.648438 43.175781 A 1.0001 1.0001 0 0 0 11.927734 43.289062 L 16.882812 39.820312 C 17.936999 40.39548 19.054994 40.857928 20.228516 41.201172 L 21.21875 47.164062 A 1.0001 1.0001 0 0 0 22.205078 48 L 27.705078 48 A 1.0001 1.0001 0 0 0 28.691406 47.173828 L 29.751953 41.1875 C 30.920633 40.838997 32.033372 40.369697 33.082031 39.791016 L 38.070312 43.291016 A 1.0001 1.0001 0 0 0 39.351562 43.179688 L 43.240234 39.287109 A 1.0001 1.0001 0 0 0 43.34375 37.996094 L 39.787109 33.058594 C 40.355783 32.014958 40.813915 30.908875 41.154297 29.748047 L 47.171875 28.693359 A 1.0001 1.0001 0 0 0 47.998047 27.707031 L 47.998047 22.207031 A 1.0001 1.0001 0 0 0 47.160156 21.220703 L 41.152344 20.238281 C 40.80968 19.078827 40.350281 17.974723 39.78125 16.931641 L 43.289062 11.933594 A 1.0001 1.0001 0 0 0 43.177734 10.652344 L 39.287109 6.7636719 A 1.0001 1.0001 0 0 0 37.996094 6.6601562 L 33.072266 10.201172 C 32.023186 9.6248101 30.909713 9.1579916 29.738281 8.8125 L 28.691406 2.828125 A 1.0001 1.0001 0 0 0 27.705078 2 L 22.205078 2 z M 23.056641 4 L 26.865234 4 L 27.861328 9.6855469 A 1.0001 1.0001 0 0 0 28.603516 10.484375 C 30.066026 10.848832 31.439607 11.426549 32.693359 12.185547 A 1.0001 1.0001 0 0 0 33.794922 12.142578 L 38.474609 8.7792969 L 41.167969 11.472656 L 37.835938 16.220703 A 1.0001 1.0001 0 0 0 37.796875 17.310547 C 38.548366 18.561471 39.118333 19.926379 39.482422 21.380859 A 1.0001 1.0001 0 0 0 40.291016 22.125 L 45.998047 23.058594 L 45.998047 26.867188 L 40.279297 27.871094 A 1.0001 1.0001 0 0 0 39.482422 28.617188 C 39.122545 30.069817 38.552234 31.434687 37.800781 32.685547 A 1.0001 1.0001 0 0 0 37.845703 33.785156 L 41.224609 38.474609 L 38.53125 41.169922 L 33.791016 37.84375 A 1.0001 1.0001 0 0 0 32.697266 37.808594 C 31.44975 38.567585 30.074755 39.148028 28.617188 39.517578 A 1.0001 1.0001 0 0 0 27.876953 40.3125 L 26.867188 46 L 23.052734 46 L 22.111328 40.337891 A 1.0001 1.0001 0 0 0 21.365234 39.53125 C 19.90185 39.170557 18.522094 38.59371 17.259766 37.835938 A 1.0001 1.0001 0 0 0 16.171875 37.875 L 11.46875 41.169922 L 8.7734375 38.470703 L 12.097656 33.824219 A 1.0001 1.0001 0 0 0 12.138672 32.724609 C 11.372652 31.458855 10.793319 30.079213 10.427734 28.609375 A 1.0001 1.0001 0 0 0 9.6328125 27.867188 L 4.0019531 26.867188 L 4.0019531 23.052734 L 9.6289062 22.117188 A 1.0001 1.0001 0 0 0 10.435547 21.373047 C 10.804273 19.898143 11.383325 18.518729 12.146484 17.255859 A 1.0001 1.0001 0 0 0 12.111328 16.164062 L 8.8261719 11.46875 L 11.523438 8.7734375 L 16.185547 12.105469 A 1.0001 1.0001 0 0 0 17.28125 12.148438 C 18.536908 11.394293 19.919867 10.822081 21.384766 10.462891 A 1.0001 1.0001 0 0 0 22.132812 9.6523438 L 23.056641 4 z M 25 17 C 20.593567 17 17 20.593567 17 25 C 17 29.406433 20.593567 33 25 33 C 29.406433 33 33 29.406433 33 25 C 33 20.593567 29.406433 17 25 17 z M 25 19 C 28.325553 19 31 21.674447 31 25 C 31 28.325553 28.325553 31 25 31 C 21.674447 31 19 28.325553 19 25 C 19 21.674447 21.674447 19 25 19 z"
                />
              </svg>
            </span>
          </div> -->
        </div>
        <add-todo @addTodoItem="addTodoItem" />
        <todos-list
          @removeTodoItemIdx="removeTodoItem"
          @checkItemIdx="checkItemIdx"
          @updateTodoItem="updateTodoItem"
          :todoItems="todoItems"
        />
      </div>
    </div>
  </div>
</template>

<script>
import addTodo from "./components/addTodo.vue";
import TodosList from "./components/todosList.vue";

export default {
  name: "Todo",
  components: {
    addTodo,
    TodosList,
  },
  data() {
    return {
      todoWidth: {
        Small: "320px",
        Medium: "480px",
        Large: "720px",
      },
      selectedTodoWidth: "Small",

      todoItems: [],
    };
  },

  mounted() {
    if (window.localStorage.getItem("todoItems")) {
      this.todoItems = JSON.parse(window.localStorage.getItem("todoItems"));
    }
  },

  methods: {
    addTodoItem(newTodoItemTitle) {
      const newTodoItem = {
        checked: false,
        title: newTodoItemTitle,
      };

      if (newTodoItem.title.length) this.todoItems.push(newTodoItem);
    },

    removeTodoItem(idxTodoItem) {
      this.todoItems = this.todoItems.filter(
        (t, idx) => idx !== Number(idxTodoItem)
      );
    },

    checkItemIdx(idx) {
      this.todoItems[idx]["checked"] = !this.todoItems[idx]["checked"];
      window.localStorage.setItem("todoItems", JSON.stringify(this.todoItems));
    },

    updateTodoItem(idx, newTodoItem) {
      // if (!newTodoItem["title"].length) {
      //   // this.removeTodoItem(idx);
      //   return;
      // }
      this.todoItems[idx] = newTodoItem;
      window.localStorage.setItem("todoItems", JSON.stringify(this.todoItems));
    },
  },

  watch: {
    todoItemsLength() {
      window.localStorage.setItem("todoItems", JSON.stringify(this.todoItems));
    },
  },

  computed: {
    todoItemsLength() {
      return this.todoItems.length;
    },
  },
};
</script>

<style scoped lang="css">
@import "./assets/todo-style.css";
@import url("https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.0.3/css/font-awesome.css");
@import url("https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css");
</style>
